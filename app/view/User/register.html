<!DOCTYPE html>
<html lang="zh-CN"><!-- InstanceBegin template="/Templates/start.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta charset="utf-8">
<!-- InstanceBeginEditable name="doctitle" -->
<title>汇富e家-会员注册</title>
<!-- InstanceEndEditable -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<link rel="shortcut icon" href="__PUBLIC__/images/favicon.ico">
<link href="__PUBLIC__/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="__PUBLIC__/bootstrap/css/flat-ui.min.css" rel="stylesheet">
<link href="__PUBLIC__/css/Public/nav.css" rel="stylesheet">
<link href="__PUBLIC__/css/base.css" rel="stylesheet">
<!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
<!--[if lt IE 9]>
  <script src="__PUBLIC__bootstrap/js/html5shiv.js"></script>
  <script src="__PUBLIC__bootstrap/js/respond.min.js"></script>
<![endif]-->
<!-- InstanceBeginEditable name="css" -->
<style type="text/css">
.container{
	margin-top:5%;
	background:#FFF;
}
#main{	
	padding:4% 2% 2% 0;
}
#myTab{
	margin-bottom:6%;
	font-size:120%;
	color:#000;
}
#aside{
	padding-top:1%;
}
</style>
<!-- InstanceEndEditable -->
</head>
<body>
    <header>
       <include file="Public:nav"/>
    </header>
    
    <!-- InstanceBeginEditable name="body" -->
    <div class="container">
    
      <div class="col-md-5" id="main">
      	<div class="row">
  			<div class="col-md-3"></div>
        	<div class="col-md-9">
            	<!-- nav nav-pills nav-justified-->
                <ul class="nav nav-tabs nav-justified" role="tablist" id="myTab">
                    <li role="presentation" class="active"><a href="#phonerg" role="tab" data-toggle="tab">手 机 注 册</a></li>
                    <li role="presentation"><a href="#phonerg" role="tab" data-toggle="tab">&nbsp;</a></li>
                </ul>
            </div><!--end col-md-9-->
        </div><!--endrow-->
        <div class="tab-content">
  			<div role="tabpanel" class="tab-pane active" id="phonerg">
            	<form class="form-horizontal" role="form" id="registerform">
            	
                <div class="form-group">
                    <label for="phone" class="col-sm-3 control-label">手机</label>
                    <div class="col-sm-9">
                    	<input type="text" name="phone" class="form-control login-field" id="phone" placeholder="">
                    </div>
                </div>
                <div class="form-group">
                    <label for="msg" class="col-sm-3 control-label">短信验证码</label>
                    <div class="col-sm-4">
                    	<input type="text" name="msg" class="form-control" id="msg" placeholder="">
                    </div>
                    <div class="col-sm-5">
                    	<button class="btn btn-block btn-info" id="getmsg">获取验证码</button>                      
                    </div>
                </div>
                <div class="form-group">
                    <label for="password" class="col-sm-3 control-label">密码</label>
                    <div class="col-sm-9">
                    	<input type="password" name="password" class="form-control" id="password" placeholder="">
                    </div>
                </div>
                 <div class="form-group">
                    <label for="repassword" class="col-sm-3 control-label">确认密码</label>
                    <div class="col-sm-9">
                    	<input type="password" name="repassword" class="form-control" id="repassword" placeholder="">
                    </div>
                </div>
                
                <div class="form-group">
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-3 col-sm-9">
                    	<input type="submit" class="btn btn-primary btn-lg btn-block" value="注  册">
                    </div>
                </div>
            	</form>
			</div><!--endphonerg-->
  			<div role="tabpanel" class="tab-pane" id="emailrg">
            	
            </div>
         </div><!--endtab-content-->
      </div><!--endmain-->
      
      
      <div class="col-md-7" id="aside">
      	<img src="__PUBLIC__/images/reg.png">
      </div><!--endaside-->
      
    </div><!--endcontainer-->
    <!-- InstanceEndEditable -->
     <footer>
       <include file="Public:footer"/>
    </footer>
<script src="__PUBLIC__/bootstrap/js/jquery.min.js"></script>
<script src="__PUBLIC__/bootstrap/js/flat-ui.min.js"></script>
<!-- InstanceBeginEditable name="js" -->
<script src="__PUBLIC__/js/validate.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(e) {
    
	$('#myTab a:first').tab('show'); // Select last tab
	//判断手机号是否格式正确
	var phoneCheckUrl = "__APP__/Validate/phoneCheck";
	var msgCheckUrl = "__APP__/Validate/msgCheck";
	//$("#phone").keyup(function(){
//		phoneCheck(phoneCheckUrl);
//	})
//	$("#msg").blur(function(){
//		msgCheck(msgCheckUrl);
//	})
//	$("#password").blur(function(){
//		pwCheck();
//	})
//	$("#repassword").blur(function(){
//		repwCheck();
//	})
	$("#getmsg").click(function(event){		
		if(phoneCheck(phoneCheckUrl)==false){return false;};
		var phone=$("#phone").val();
		$.ajax({
			url:"__APP__/Validate/msg",
			data:"phone="+phone,
			type:"post",
			dataType:"text",
			success: function(data){},
		});
		event.preventDefault();
		var count = 60;
		BtnCount();
		function BtnCount() {
		     if (count == 0) {
				$("#getmsg").attr('disabled',false).html("获取验证码");
				clearTimeout();              
			}else {
				$("#getmsg").html(count+"秒后重新获取");
				$("#getmsg").attr("disabled",true);
		          count--;
		          setTimeout(function(){
					BtnCount();
				}, 1000);
		     }
		}
	});
	
	$("input:submit").click(function(event){
		if(phoneCheck(phoneCheckUrl)==false){return false;};
		if(msgCheck(msgCheckUrl)==false){return false;};
		if(pwCheck()==false){return false;};
		if(repwCheck()==false){return false;};
		var str=$("form").serialize();
		$.ajax({
			url:"__APP__/User/add",
			data:str,
			type:"post",
			dataType:"text",
			success: function(data){    
				alert(data);      
			},
			error: function(){  }
			
		});
		event.preventDefault();
	})
	
})
</script>
<!-- InstanceEndEditable -->
</body>
<!-- InstanceEnd --></html>
